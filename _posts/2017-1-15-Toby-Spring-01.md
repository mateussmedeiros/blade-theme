---
layout: post
title: 토비의 스프링 정리 - CH01
date: 2017-01-15
description: 토비의 스프링 정리 - CH01
permalink: /2017/01/15/Toby-Spring-01/
---

## 관심사의 분리, 리팩토링
* 리팩토링은 기존의 코드를 외부의 동작방식에는 병화 없이 내부 구조를 변경해서 재구성하는 작업 또는 기술

## 개방 폐쇠 원칙(OCP, Open-Closed Principle)
* 클래스나 모듈은 확장에는 열려있어야 하고 변경에는 닫혀 있어야 한다.

## 전략 패턴
* 자신의 기능 전략(context)에서, 필요에 따라 변경이 필요한 알고리즘을 인터페이스를 통해 통째로 외부로 분리시키고, 이를 구현한 구체적인 알고리즘 클래스를 필요에 따라 바꿔서 사용할 수 있게 하는 디자인 패턴

## 제어의 역전(IoC, Inversion of Control)
* 프로그램의 제어 흐름 구조가 뒤바뀌는 것

### 팩토리
* 객체의 생성 방법을 결정하고 그렇게 만들어진 오브젝트를 돌려주는 일을 하는 오브젝트
* 오브젝트를 생성하는 쪽과 생성된 오브젝트를 사용하는 쪽의 역할과 책음을 깔끔하게 분리하려는 목적으로 사용

### 제어의 역전
* 프로그램의 시작을 담당하는 main()과 같은 엔트리 포인트를 제외하면 모든 오브젝트는 위임받은 제어 권한을 갖는 특별한 오브젝트에 의해 결정되고 만들어진다.

## 스프링의 IoC

### 빈(bean)
* 스프링이 제어권을 가지고 직접 만들고 관계를 부여하는 오브젝트

### 빈 팩토리(bean facktory)
* 빈의 생성과 관계설정 같은 제어를 담당하는 IoC 오브젝트
* 빈을 생성하고 관계를 설정하는 IoC의 기본 기능에 초점

### 애플리케이션 컨텍스트(application context)
* 빈 팩토리를 확장한 IoC 컨테이너
* 애플리케이션 전반에 걸쳐 모든 구성요소의 제어 작업을 담당하는 IoC 엔진이라는 의미 부각
* ApplicationContext는 BeanFactory를 상속한다.

## 싱글톤 레지스트리
애플리케이션 컨텍스트는 싱글톤을 저장하고 관리하는 싱글톤 레지스트리(singleton registry)

### 오브젝트의 동일성과 동등성

| 동일성(identity) | 동등성(equality) |
|:----------:|:-----------:|
| == | equals() |
| 하나의 오브젝트만 존재 | 두 개의 각기 다른 오브젝트가 메모리상에 존재|


### 싱글톤 패턴의 원리
* 애플리케이션 안에 제한된 수, 대개 한 개의 오브젝트만 만들어서 사용하는 것

### 싱글톤 패턴의 한계
* private 생성자를 갖고 있기 때문에 상속할 수 없다.
* 싱글톤은 테스트하기가 어렵다.
* 서버환경에서는 싱글톤이 하나만 만들어지는 것을 보장하지 못한다.
* 싱글톤의 사용은 전역 상태를 만들 수 있기 때문에 바람직하지 못하다.

### 싱글톤 레지스트리
* 스프링은 직접 싱글톤 형태의 오브젝트를 만들고 관리하는 기능을 제공

## 의존관계 주입(DI, Dependency Injection)
* 클래스 모델이나 코드에는 런타임 시점의 의존관계가 드러나지 않는다. 그러기 위해서는 인터페이스에만 의존하고 있어야 한다.
* 런타임 시점의 의존관계는 컨테이너나 팩토리 같은 제3의 존재가 결정한다.
* 의존관계는 사용할 오브젝트에 대한 레퍼런스를 외부에서 제공(주입)해줌으로써 만들어진다.

### 의존관계
* 두 개의 클래스 또는 모듈이 의존관계에 있다고 말할 때는 항상 방향성을 부여해줘야 한다.

```uml
A ..> B
```

* A가 B에 의존하고 있다.
* B가 변하면 그것이 A에 영향을 미친다.

## 의존관계 검색(DL, Dependency Lookup)
* 자신이 필요로하는 의존 오브젝트를 능동적으로 찾는다.
* 런타임 시 의존관계를 맺을 오브젝트를 결정하는 것과 오브젝트의 생성 작업은 외부 컨테이너에게 IoC로 맡기지만, 이를 가져올 때는 메소드나 생성자를 통한 주입 대신 스스로 컨테이너에게 요청하는 방법을 사용

[ 참고 ]

* 토비의 스프링 3.1 vol. 1
